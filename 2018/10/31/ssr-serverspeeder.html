<!-- 博文的布局-Layout -->
<!DOCTYPE html>
<html>
<head>
    <!-- 引入head标签 -->
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-sclable=0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="description" content="一个兴趣使然的程序员" />
<meta name="keywords" content="技术, Python, Vue, 后端开发，前端开发，日常" />
<link rel="stylesheet" href="/assets/css/bootstrap-toc.min.css">
<link rel="stylesheet" href="/assets/css/style.css">
<link rel="stylesheet" href="/assets/css/media.css">
<link rel="stylesheet" href="/assets/css/animate.min.css">
<link rel="stylesheet" href="/assets/css/pygments/pygments_default.css">
<link rel="stylesheet" href="/assets/css/github-markdown.css">

<!-- SNS-icon -->
<script src="//at.alicdn.com/t/font_856428_y9z6nq7zf5.js"></script>
<!-- share.css -->
<link rel="stylesheet" href="/assets/css/share.min.css">
<!-- font -->
<link rel="stylesheet" href="/assets/css/font.css">
<!-- <link href="https://fonts.googleapis.com/css?family=Kaushan+Script|Pacifico|Ubuntu|Roboto+Mono|Source+Sans+Pro" rel="stylesheet"> -->

<!-- Favicon -->
<link href="/assets/images/profile.jpeg" rel="shortcut icon" />
<link href="/assets/images/profile.jpeg" rel="apple-touch-icon-precomposed" />
<!-- Android Lolipop Theme Color -->
<!-- <meta name="theme-color" content="#1464FB"> -->
<title>SSR 速锐 实现科学上网，提高外网访问速度</title>
<!-- 百度统计 -->

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?db89c93fc4343f3fa42c3534a1aaad01";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

<!-- 谷歌分析 -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '');
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/twitter-bootstrap/4.1.3/js/bootstrap.min.js"></script>
<script src="/assets/js/bootstrap-toc.min.js"></script>
<script src="/assets/js/main.js"></script>


    <!-- Android Lolipop Theme Color -->
<meta name="theme-color" content=" rgb(215, 135, 160) ">
</head>
<body>

<!-- 顶部锚点 -->
<a id="htmlup" name="htmlup"></a>
<!-- 引入博文顶部选项 -->

<header id="post-header" style="background-color:rgb(215, 135, 160);">
  <div class="top-center">
      <div class="logo">
          <a href="/" title="my awesome webtitle" style="color: white;"></a>
      </div>
      <nav class="top-nav">
          <ul>
              
                <li><a href="/" style="color: white;">首页</a></li>
              
                <li><a href="/tags.html" style="color: white;">标签</a></li>
              
                <li><a href="/timeline.html" style="color: white;">时间线</a></li>
              
                <li><a href="/about.html" style="color: white;">关于博主</a></li>
              
                <li><a href="/friendLink.html" style="color: white;">友情链接</a></li>
              
          </ul>
      </nav>
      <div id="site_search">
    <input type="text" id="search-input" placeholder="Search to jump ...">
    <ul id="results-container"></ul>
</div>
<script src="/assets/js/simple-jekyll-search.min.js"></script>
<script>
if (os.isAndroid || os.isPhone) {
  $('#site_search').hide()
} else {
  var sjs = SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '/search.json'
  })}
</script>
      <div id="top-boot">
        <a href="javascript:;" id="boot1" style="display:block;" onclick="document.getElementById('boot-area').style.display='block';document.getElementById('boot1').style.display='none';document.getElementById('boot2').style.display='block';"><img src="/assets/images/boot_white.png" alt=""></a>
        <a href="javascript:;" id="boot2" style="display: none;" onclick="document.getElementById('boot-area').style.display='none';document.getElementById('boot1').style.display='block';document.getElementById('boot2').style.display='none';"><img src="/assets/images/boot_white.png" alt=""></a>
      </div>
  </div>

</header>


<!-- 引入移动下拉选项 -->
<div id="boot-area">
    <ul>
        
          <a href="/"><li>首页</li></a>
        
          <a href="/tags.html"><li>标签</li></a>
        
          <a href="/timeline.html"><li>时间线</li></a>
        
          <a href="/about.html"><li>关于博主</li></a>
        
          <a href="/friendLink.html"><li>友情链接</li></a>
        
    </ul>
</div>

<!-- 引入博文顶部样式 -->
<!-- 版本一 垃圾 -->
<!-- <div class="wow fadeIn top" data-wow-duration="3.5s" >
    <span class="wow fadeInUp" data-wow-delay="0.2s">SSR 速锐 实现科学上网，提高外网访问速度</span>
    <span class="wow fadeInUp" data-wow-delay="0.4s"></span>
    <span class="wow fadeInUp" data-wow-delay="0.4s"></span>
    <span class="wow fadeInUp" data-wow-delay="0.6s">作者&nbsp;&nbsp;|&nbsp;&nbsp;true</span>
</div> -->

<!-- 版本二 可切换页面 -->

<div class="post-top" style="background-color:rgb(215, 135, 160);">
  <!-- 页面宽度大于800px -->
  <div class="left-area">
    
    <a href="/2018/10/03/emqttd-django.html" class="btn bounceInLeft animated" onmouseover="showLeft();this.style.color='rgb(215, 135, 160)';" onmouseout="goneLeft();this.style.color='rgba(0,0,0,.2)';"><</a>
    <div id="left-tab" style="display:none;"><span class="left-san"></span><span class="left-main" style="color:rgb(215, 135, 160);"><sapn class="main">MQTT消息服务器EMQ部署，并改造Mysql鉴权，通过Django进行用户管理</sapn></span></div>
    
  </div>
  <div class="post-titlearea">
    <span class="wow fadeInUp" data-wow-delay="0.2s">SSR 速锐 实现科学上网，提高外网访问速度</span>
    <!-- <span class="wow fadeInUp" data-wow-delay="0.4s"></span> -->
    <!-- <span class="wow fadeInUp" data-wow-delay="0.4s"></span> -->
    <!-- <span class="wow fadeInUp" data-wow-delay="0.6s">作者&nbsp;&nbsp;|&nbsp;&nbsp;true</span> -->
  </div>
  <div class="right-area">
    
    <a href="/2018/11/01/greedy-algorithm.html" class="btn bounceInRight self-animated" onmouseover="showRight();this.style.color='rgb(215, 135, 160)';" onmouseout="goneRight();this.style.color='rgba(0,0,0,.2)';">></a>
    <div id="right-tab" style="display:none;"><span class="right-san"></span><span class="right-main" style="color:rgb(215, 135, 160);"><sapn class="main">贪心算法的转化</sapn></span></div>
    
  </div>

  <!-- 页面宽度小于800px -->
  <div class="post-changearea">
    
    <a href="/2018/10/03/emqttd-django.html" class="leftchange" style="border-right: 1px solid rgb(215, 135, 160);border-bottom: 2px solid rgb(215, 135, 160);"><span>上一篇<br><br>MQTT消息服务器EMQ部署，并改造Mysql鉴权，通过Django进行用户管理</span></a>
    
    
    <a href="/2018/11/01/greedy-algorithm.html" class="rightchange" style="border-left: 1px solid rgb(215, 135, 160);border-bottom: 2px solid rgb(215, 135, 160);"><span>下一篇<br><br>贪心算法的转化</span></a>
    
  </div>
</div>

<div class="toc">
    <span>Toc</span>
    <nav id="toc"></nav>
</div>
<div class="markdown-body fadeInUp animated">

    
    
    <div class="postpage-subtitle"
         style="border-left: 8px solid rgb(215, 135, 160); border-right: 8px solid rgb(215, 135, 160)">
        程序员访问Google解决方案
    </div>
    
    
    <img src="/assets/images/2018-10-31-ssr-serverspeeder/shadowsocksR-logo.png">
    <!-- 文章内容 -->
    <blockquote>
  <p>本篇说明仅供交流与学习使用，请勿作出任何违反国家法律的行为。</p>
</blockquote>

<p>由于最近一些同事跟朋友有遇到自己的科学上网工具不好用，速度很慢，所以分享一下自己的解决方案。</p>

<p>这篇解决方案教程会从云服务提供商的挑选开始，到SSR搭建和配合速锐提高外网访问速度，然后介绍一些实用的工具。</p>

<p>自己动手丰衣足食。</p>

<h2 id="云服务提供商vultr">云服务提供商Vultr</h2>
<p>这里给我用的这个国外的云服务提供商打个免费的广告。因为国内的很多云服务器都是按包月计费的，所以虽然购买方便，但是不会像这个提供商一样良心，按小时计费的。</p>

<p>在购买时有2.5刀、3.5刀跟5刀的不同选择，但是2.5刀只有ipv6所以在3.5跟5之间选择就好<br />
而这两个的区别主要是内存和每个月的流量，512G和1T在我的使用看来是完全够的。<br />
<img src="/assets/images/2018-10-31-ssr-serverspeeder/WX20181031-224742@2x.png" alt="img1" /><br />
这里是注册链接<a href="https://www.vultr.com/?ref=6896340">Vultr</a>。</p>

<p>购买之后不会立即扣费，他会按照你的使用时常按月计费。也就是说你在这个月期间不满意，销毁了服务器实例，它只会按照你的使用时长来计费。</p>

<p>由于我是在我朋友的服务器上部署的实例，但是需要走一下部署流程，这里我从购买开始。</p>

<p>这里我选择新加波的是新加波的服务器，可以按照自己习惯的使用地区来选择。<br />
操作系统选择的是<code class="highlighter-rouge">CentOS 7</code>，因为我后面的教程都是按照CentOS来部署的所以不要选错了。<br />
<img src="/assets/images/2018-10-31-ssr-serverspeeder/WX20181031-224302@2x.png" alt="img2" /></p>

<p>购买成功后需要等待实例初始化，等初始化完成之后可以到服务器的<code class="highlighter-rouge">manage</code>页面查看<code class="highlighter-rouge">ssh</code>的用户名和密码。
<img src="/assets/images/2018-10-31-ssr-serverspeeder/WX20181031-225731@2x.png" alt="img3" /></p>

<h2 id="ssr---shadowsocksr-server-部署">SSR - ShadowsocksR Server 部署</h2>
<p>这里感谢<a href="https://doub.io/author/toyo/">Toyo</a>为我们提供了方便的一键式安装脚本。</p>

<p>登陆到vultr服务器后，<br />
我们只需要在命令行执行：</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget <span class="nt">-N</span> <span class="nt">--no-check-certificate</span> https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/ssr.sh <span class="o">&amp;&amp;</span> <span class="nb">chmod</span> +x ssr.sh <span class="o">&amp;&amp;</span> bash ssr.sh
</code></pre></div></div>
<p><img src="/assets/images/2018-10-31-ssr-serverspeeder/gif1.gif" alt="gif1" />
然后输入<code class="highlighter-rouge">1</code>，选择<code class="highlighter-rouge">1. 安装 ShadowsocksR</code>。</p>

<p>然后接下来会需要配置：</p>
<blockquote>
  <p>以下配置后面可以更改</p>
</blockquote>

<p>1.SSR服务器的端口号（默认2333）</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>信息] 开始设置 ShadowsocksR账号配置...
请输入要设置的ShadowsocksR账号 端口
<span class="o">(</span>默认: 2333<span class="o">)</span>:

——————————————————————————————
	端口 : 2333
——————————————————————————————
</code></pre></div></div>
<p>2.SSR服务器密码</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>请输入要设置的ShadowsocksR账号 密码
<span class="o">(</span>默认: doub.io<span class="o">)</span>:<span class="k">********</span>

——————————————————————————————
	密码 : <span class="k">*****</span>
——————————————————————————————
</code></pre></div></div>
<p>3.加密方式，这里我选择了<code class="highlighter-rouge">10.aes-256-cfb</code></p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">(</span>默认: 5. aes-128-ctr<span class="o">)</span>:10

——————————————————————————————
	加密 : aes-256-cfb
——————————————————————————————
</code></pre></div></div>
<p>4.协议，我选择了<code class="highlighter-rouge">origin</code></p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="o">(</span>默认: 2. auth_sha1_v4<span class="o">)</span>:1

——————————————————————————————
	协议 : origin
——————————————————————————————
</code></pre></div></div>
<p>5.混淆</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="o">(</span>默认: 1. plain<span class="o">)</span>:1

——————————————————————————————
	混淆 : plain
——————————————————————————————
</code></pre></div></div>
<p>其他的配置按照自己需求来，剩下的我都是直接回车。<br />
配置完成后程序会开始安装相关依赖。</p>

<p>安装完成后，会显示以下信息，将其中的SSR二维码链接复制到浏览器，并将显示的二维码保存下来。
<img src="/assets/images/2018-10-31-ssr-serverspeeder/WX20181031-232921@2x.png" alt="img4" />
这里我利用<code class="highlighter-rouge">telnet</code>命令测试了一下<code class="highlighter-rouge">ssr</code>服务是否跑起来了</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>telnet host port
</code></pre></div></div>
<p>若<code class="highlighter-rouge">ssr</code>成功运行，并且没有防火墙的影响，则运行结果应该是如下：
<img src="/assets/images/2018-10-31-ssr-serverspeeder/WX20181031-234040@2x.png" alt="img5" /></p>

<p>如果被防火墙影响了，解决的命令如下：</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>firewall-cmd <span class="nt">--zone</span><span class="o">=</span>public <span class="nt">--add-port</span><span class="o">=</span>端口号/tcp <span class="nt">--permanent</span>
firewall-cmd <span class="nt">--reload</span>
</code></pre></div></div>

<blockquote>
  <p>SSR服务的相关命令
启动 ShadowsocksR：<code class="highlighter-rouge">/etc/init.d/ssr start</code><br />
停止 ShadowsocksR：<code class="highlighter-rouge">/etc/init.d/ssr stop</code><br />
重启 ShadowsocksR：<code class="highlighter-rouge">/etc/init.d/ssr restart</code><br />
查看 ShadowsocksR状态：<code class="highlighter-rouge">/etc/init.d/ssr status</code></p>
</blockquote>

<h2 id="ssr客户端">SSR客户端</h2>

<p>Windows: <a href="https://oss2.mzyyun.com/ssr.zip">C# SSR客户端</a><br />
Mac OS: <a href="https://oss2.mzyyun.com/SS-X-R.zip">SSR客户端</a><br />
IOS: <a href="https://itunes.apple.com/cn/app/detour-%E4%B8%80%E6%AC%BE%E4%BD%8E%E8%B0%83%E5%88%B0%E5%AE%B6%E7%9A%84%E5%8F%8Cs%E5%AE%A2%E6%88%B7%E7%AB%AF/id1260141606?mt=8">Detour - 一款低调到家的双S客户端</a><br />
安卓: <a href="https://github.com/shadowsocksr-backup/shadowsocksr-android/releases/download/3.4.0.8/shadowsocksr-release.apk">SSR客户端</a></p>

<p>安装好客户端后，使用客户端的扫描二维码功能来扫描SSR服务端的二维码来添加服务器。
<img src="/assets/images/2018-10-31-ssr-serverspeeder/WX20181031-235503@2x.png" alt="img6" />
完成以上配置后就可以访问<a href="www.google.com">Google</a>了！但是还不够，我们还需要配置速锐来提高外网的访问速度。</p>

<h2 id="速锐">速锐</h2>
<p>关于速锐和BBR这里有一篇文章介绍，<a href="https://www.zhujiboke.com/2017/08/673.html">锐速与BBR的原理简单解析</a>，这里就不做介绍了。
这一同样感谢<a href="https://www.91yun.co/archives/683">91yun</a>提供的一键安装脚本。</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget <span class="nt">-N</span> <span class="nt">--no-check-certificate</span> https://github.com/91yun/serverspeeder/raw/master/serverspeeder.sh <span class="o">&amp;&amp;</span> bash serverspeeder.sh
</code></pre></div></div>
<p>在运行后出现以下提示，则代表系统的内核不支持需要更换内核。
<img src="/assets/images/2018-10-31-ssr-serverspeeder/gif2.gif" alt="gif2" /></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rpm <span class="nt">-ivh</span> http://soft.91yun.org/ISO/Linux/CentOS/kernel/kernel-3.10.0-229.1.2.el7.x86_64.rpm <span class="nt">--force</span>
</code></pre></div></div>
<p>输入命令安装完内核后，查看是否安装成功</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rpm <span class="nt">-qa</span> | <span class="nb">grep </span>kernel
</code></pre></div></div>
<p><img src="/assets/images/2018-10-31-ssr-serverspeeder/WX20181101-001310@2x.png" alt="img7" />
重启服务器</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>reboot
</code></pre></div></div>
<p>重启成功后再次输入一键安装脚本命令，安装成功后结果如下：
<img src="/assets/images/2018-10-31-ssr-serverspeeder/WX20181101-001637@2x.png" alt="img8" />
由于更换了内核的原因，<code class="highlighter-rouge">CentOS</code>的防火墙启动了，需要执行上文提到的防火墙端口开放命令来保证<code class="highlighter-rouge">ssr</code>服务的正常链接。</p>

<p>接下来我们使用<a href="http://www.speedtest.net/zh-Hans">speedtest</a>进行测速，我家是百兆光纤，测速结果一目了然。
<img src="/assets/images/2018-10-31-ssr-serverspeeder/WX20181101-002619@2x.png" alt="img9" /></p>

<h2 id="proxy-switchyomega">Proxy SwitchyOmega</h2>
<blockquote>
  <p>方便的使用SSR客户端，不用切换全局代理</p>
</blockquote>

<p><code class="highlighter-rouge">Proxy SwitchyOmega</code>是一款谷歌浏览器的插件，<a href="https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif">链接</a></p>

<p>它可以方便的定义访问规则，那些需要走代理，哪些不需要。</p>

<h2 id="总结">总结</h2>
<p>以上就是<code class="highlighter-rouge">程序员访问Google解决方案</code>的主要内容。 <br />
<em><code class="highlighter-rouge">工欲善其事，必先利其器</code></em></p>


    <!-- 引入share模块 -->
    
  <div class="social-share-wrapper">
    <div class="social-share"></div>
  </div>


<!-- share.js -->
<script src="/assets/js/social-share.min.js"></script>
<script>
  socialShare('.social-share', {
    sites: [
      
        'qq'
        ,
        
      
        'wechat'
        ,
        
      
        'weibo'
        ,
        
      
        'twitter'
        ,
        
      
        'facebook'
        
      
    ],
    wechatQrcodeTitle: "分享到微信朋友圈",
    wechatQrcodeHelper: '期待在朋友圈见到这篇文章'
  });
</script>

</div>

<!-- 底部锚点 -->
<a id="htmldown" name="htmldown"></a>
<!-- 引入评论模块 -->



    <section class="post-footer-item comment">
      <div id="lv-container" data-id="city" data-uid="MTAyMC80MDA4OS8xNjYxNg=="></div>
    </section>

    <!-- 来必力City版安装代码 -->
    <script type="text/javascript">
       (function(d, s) {
           var j, e = d.getElementsByTagName(s)[0];

           if (typeof LivereTower === 'function') { return; }

           j = d.createElement(s);
           j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
           j.async = true;

           e.parentNode.insertBefore(j, e);
       })(document, 'script');
    </script>
    <noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
    <!-- City版安装代码已完成 -->





<!-- 引入goto模块 -->
<div class="bounceInRight animated go">
  <a title="顶部切换页面" class="gototop" href="#htmlup" target="_self">
    <div class="box" style="font-family:'ffad_matroregular';">
        Top
    </div>
  </a>
  <a title="底部有livere评论哦" class="gotobottom" href="#htmldown" target="_self">
    <div class="box" style="font-family:'ffad_matroregular';">
        Foot
    </div>
  </a>
</div>

<!-- 引入页面底部模块 -->
<footer id="bottom">
  <br>
  <span>Gzp的博客 ©
  
  
    2018
    -
  
  2019
  <a href="http://www.miitbeian.gov.cn">粤ICP备16038504号-1</a>
  <br>
  Powered by <a href="https://www.jekyll.com.cn/">Jekyll</a> | <a href="https://github.com/xukimseven/HardCandy-Jekyll">HardCandy-Jekyll</a></span>
</footer>


<!-- 引用wow.js的动画效果 -->
<script src="/assets/js/wow.js"></script>
<script>
var wow = new WOW({
  boxClass: 'wow',
  animateClass: 'animated',
  // offset: 600,
  mobile: true,
  live: true
})
wow.init()
</script>
<!-- 页面刷新回到顶部 -->
<script>
window.onbeforeunload = function () {
  //刷新后页面自动回到顶部
  document.documentElement.scrollTop = 0  //ie下
  document.body.scrollTop = 0  //非ie
}
</script>
<script src="https://cdn.bootcss.com/twitter-bootstrap/4.1.3/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="/assets/css/bootstrap-toc.min.css">
<script src="/assets/js/bootstrap-toc.min.js"></script>
<script>
var navSelector = '#toc'
var $myNav = $(navSelector)

if (os.isAndroid || os.isPhone) {
  $myNav.parent().hide()
} else {
  $(function () {
    Toc.init($myNav)
    $('body').scrollspy({
      target: navSelector
    })
  })
}
</script>
<style type="text/css">

    nav[data-toggle=toc] .nav>li>a:focus,nav[data-toggle=toc] .nav>li>a:hover {
        padding-left: 19px;
        color: rgb(215, 135, 160);
        text-decoration: none;
        background-color: transparent;
        border-left: 1px solid rgb(215, 135, 160);
    }

    nav[data-toggle=toc] .nav-link.active, nav[data-toggle=toc] .nav-link.active:focus, nav[data-toggle=toc] .nav-link.active:hover {
        padding-left: 18px;
        font-weight: 700;
        color: rgb(215, 135, 160);
        background-color: transparent;
        border-left: 2px solid rgb(215, 135, 160);
    }

</style>
</body>
</html>
